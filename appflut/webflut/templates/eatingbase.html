{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta name="viewport" charset="UTF-8" content="width=device-width, initial-scale=1">
  <title>Добавить калории</title>
  <!--Медиа запросы, адаптив-->
  <link href="{% static 'css/Eatings Pages/eatings.css' %}" rel="stylesheet" />
  <!--Подключение шрифтов-->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter&family=Lexend&display=swap" rel="stylesheet">
  <!--Скрипт-->
  <script defer src="{% static 'js/main.js' %}"></script>
</head>

<body>
  {% block content %}
  <!-- Основное содержимое страницы. Будет переопределено в наследованных шаблонах -->
  {% endblock %}

  <a href="#" class="buttonMod" onclick="openModal()">создать продукт</a>
  <div id="modal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">&times;</span>
      <form action="" method="post">
        {% csrf_token %}
        {{ form }}
        <button type="submit">Сохранить</button>
      </form>
    </div>
  </div>

  <!--Поиск продуктов-->
  <form action="" class="search" method="GET">
    <input type="text" name="search" placeholder="Search by name" value="{{ search_query }}">
    <button type="submit"><img src="{% static 'accets/поиск.png' %}" style="width: 10vw;" /></button>
  </form>
  <!--Поиск продуктов-->

  <div class="product-container">
    {% for product in products %}
    <div class="product-item">
      <text>{{ product.name }}</text>
      <p>Каллории: {{ product.calories_in }}</p>

      <div class="product-row">
        <li style="color: #ca517a;">{{ product.proteins }} г.</li>
        <li style="color: #fbb20d;">{{ product.fats }} г.</li>
        <li style="color: #4887ba;">{{ product.carbohydrates }} г.</li>
      </div>

      {% block contenbutton %}
      {% endblock %}
    </div>
    {% empty %}
    <p>Ничего не найдено</p>
    {% endfor %}
  </div>

  <script>
    var modal = document.getElementById("modal");

    function openModal() {
      modal.style.display = "block";
    }

    function closeModal() {
      modal.style.display = "none";
    }

    function openModal2(id) {
      document.querySelector('#modal2').style.display = "block";
    }

    function closeModal2(id) {
      document.querySelector('#modal2').style.display = "none";
    }

    function openModal3(id) {
      document.querySelector('#modal3').style.display = "block";
    }

    function closeModal3(id) {
      document.querySelector('#modal3').style.display = "none";
    }

    function openModal4(id) {
      document.querySelector('#modal4').style.display = "block";
    }

    function closeModal4(id) {
      document.querySelector('#modal4').style.display = "none";
    }

    window.onclick = function (event) {
      if (event.target === modal) {
        closeModal();
      } else if (event.target.classList.contains('modal2')) {
        event.target.style.display = "none";
      } else if (event.target.classList.contains('modal3')) {
        event.target.style.display = "none";
      } else if (event.target.classList.contains('modal4')) {
        event.target.style.display = "none";
      }
    };
  </script>
</body>

</html>